<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analyse & Prédictions Saint-André (2014-2026)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Roboto:wght@300;400;500&display=swap');
        
        body {
            /* Dark Mode par défaut */
            font-family: 'Roboto', sans-serif;
            background-color: #121212; 
            color: #e0e0e0; 
        }
        
        h1, h2, h3, h4 {
            font-family: 'Montserrat', sans-serif;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }

        .metric-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.4), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
        }

        .arrow-down {
            width: 0; 
            height: 0; 
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 20px solid #374151; 
            margin: 0 auto;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Hero Section -->
    <header class="bg-gradient-to-r from-blue-900 to-cyan-700 text-white p-8 md:p-12 shadow-lg">
        <div class="max-w-6xl mx-auto text-center">
            <h1 class="text-4xl md:text-6xl font-extrabold mb-4 tracking-tight">SAINT-ANDRÉ : LE MODÈLE PRÉDICTIF</h1>
            <p class="text-xl md:text-2xl font-light text-cyan-100">Analyse Historique (2014-2020) & Projections Stratégiques (2026)</p>
            <div class="mt-8 flex justify-center space-x-4">
                <div class="bg-white/10 backdrop-blur-md rounded-full px-6 py-2 border border-white/20">
                    <span class="font-bold">2014</span> ➔ <span class="font-bold">2020 (Validé)</span> ➔ <span class="font-bold">2026 (Projeté)</span>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto p-4 md:p-8 space-y-12">

        <!-- CONTEXTE 2020 -->
        <section class="bg-gray-800 rounded-xl shadow-lg p-6 md:p-8">
            <h2 class="text-2xl md:text-3xl font-bold text-cyan-400 mb-4 border-b-4 border-pink-500 inline-block pb-1">1. L'Anatomie de la Bascule (2020)</h2>
            <p class="text-lg text-gray-200 leading-relaxed mb-6">
                L'analyse des données réelles montre que la victoire de Joé Bedier en 2020 ne repose pas sur une simple érosion démographique, mais sur une **abstention record** (+25 pts) et une **unification massive des reports de voix** au second tour.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
                <div class="bg-blue-900/50 p-4 rounded-lg metric-card border border-blue-700">
                    <div class="text-4xl font-bold text-blue-300">+7 953</div>
                    <div class="text-sm text-blue-400 font-semibold uppercase tracking-wide">Nouveaux Inscrits (2014-2020)</div>
                </div>
                <div class="bg-pink-900/50 p-4 rounded-lg metric-card border border-pink-700">
                    <div class="text-4xl font-bold text-pink-300">+25 pts</div>
                    <div class="text-sm text-pink-400 font-semibold uppercase tracking-wide">Explosion de l'Abstention</div>
                </div>
                <div class="bg-cyan-900/50 p-4 rounded-lg metric-card border border-cyan-700">
                    <div class="text-4xl font-bold text-cyan-300">47,8%</div>
                    <div class="text-sm text-cyan-400 font-semibold uppercase tracking-wide">Taux de Report vers Bedier</div>
                </div>
            </div>
        </section>

        <!-- GRAPHIQUES HISTORIQUES -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
            <div class="order-2 md:order-1 bg-gray-800 rounded-xl shadow-lg p-6">
                <h3 class="text-xl font-bold text-gray-100 mb-2">Le Paradoxe Démographique</h3>
                <p class="text-gray-400 text-sm mb-4">
                    Croissance du corps électoral vs Effondrement de la participation.
                </p>
                <div class="chart-container">
                    <canvas id="demographicsChart"></canvas>
                </div>
            </div>
            <div class="order-1 md:order-2 space-y-4">
                <div class="bg-gray-800 rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold text-gray-100 mb-2">Réserves de Voix (1er Tour 2020)</h3>
                    <p class="text-gray-400 text-sm mb-4">
                        Le camp Virapoullé avait fait le plein dès le 1er tour (83% de mobilisation), tandis que Bedier disposait d'une forte réserve.
                    </p>
                    <div class="chart-container">
                        <canvas id="mobilizationChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- LE POOL DE REPORT 2020 -->
        <section class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div class="md:col-span-1 bg-gradient-to-br from-gray-900 to-gray-950 text-white rounded-xl shadow-lg p-6 flex flex-col justify-center border border-gray-700">
                <h3 class="text-xl font-bold mb-4 text-amber-400">Le "Pool" 2020</h3>
                <p class="mb-6 text-gray-400">
                    Au soir du 1er tour 2020, **10 210 voix** (listes éliminées) étaient disponibles. C'est la clé du scrutin.
                </p>
                <div class="text-5xl font-extrabold text-white mb-2">10 210</div>
                <div class="text-sm text-gray-500 uppercase tracking-widest">Voix à redistribuer</div>
            </div>
            <div class="md:col-span-2 bg-gray-800 rounded-xl shadow-lg p-6">
                <h3 class="text-lg font-bold text-gray-100 mb-4">Composition des Voix Éliminées (2020)</h3>
                <p class="text-sm text-gray-400 mb-4">Détail des forces (dont Ramassamy et Moutoucomorapoulé) qui ont basculé.</p>
                <div class="chart-container" style="height: 300px;">
                    <canvas id="poolChart"></canvas>
                </div>
            </div>
        </section>

        <!-- VALIDATION DU MODÈLE -->
        <section class="bg-gray-700 rounded-xl shadow-lg p-6 md:p-8">
            <h2 class="text-2xl md:text-3xl font-bold text-cyan-400 mb-2">Validation du Modèle Prédictif</h2>
            <p class="text-gray-200 mb-6">
                Application de la formule : <code class="bg-gray-800 text-white px-2 py-1 rounded text-sm font-mono">V2 = V1 + (Pool × Taux)</code>. Précision remarquable.
            </p>
            <div class="chart-container">
                <canvas id="validationChart"></canvas>
            </div>
            <div class="mt-8 overflow-x-auto">
                <table class="w-full text-left border-collapse bg-gray-800 rounded-lg overflow-hidden shadow-lg">
                    <thead class="bg-gray-900 text-white">
                        <tr>
                            <th class="p-4">Candidat</th>
                            <th class="p-4">Prédiction</th>
                            <th class="p-4">Réel (2020)</th>
                            <th class="p-4 text-right">Précision</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-b border-gray-700">
                            <td class="p-4 font-bold text-blue-400">J.M. VIRAPOULLÉ</td>
                            <td class="p-4 text-gray-100">9 809</td>
                            <td class="p-4 text-gray-100">9 813</td>
                            <td class="p-4 text-right text-green-400 font-bold">99,96%</td>
                        </tr>
                        <tr>
                            <td class="p-4 font-bold text-cyan-400">Joé BEDIER</td>
                            <td class="p-4 text-gray-100">10 702</td>
                            <td class="p-4 text-gray-100">10 703</td>
                            <td class="p-4 text-right text-green-400 font-bold">99,99%</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- PROJECTION 2026 - SECOND TOUR -->
        <section id="projection2026_second_tour" class="bg-gray-800 rounded-xl shadow-lg p-6 md:p-8 border-4 border-amber-500">
            <h2 class="text-2xl md:text-3xl font-bold text-amber-400 mb-4 border-b-4 border-amber-500 inline-block pb-1">Projection 2nd Tour 2026 (Scénario de Bascule)</h2>
            <p class="text-lg text-gray-200 leading-relaxed mb-6">
                Le modèle projette une inversion de la dynamique. La **consolidation de l'opposition** (JMV + Ramassamy + Moutoucomorapoulé + Reports Droite/RN) ferait face à un sortant (Bedier) affaibli par la **fragmentation à gauche** (Fruteau).
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div>
                    <h3 class="text-xl font-bold text-gray-100 mb-4">Duel Projeté</h3>
                    <div class="chart-container">
                        <canvas id="projection2ndTourChart"></canvas>
                    </div>
                </div>
                <div class="space-y-4">
                    <div class="bg-blue-900/50 border-l-4 border-blue-700 p-4">
                        <h4 class="font-bold text-blue-300">Opposition (JMV Consolidé)</h4>
                        <p class="text-sm text-blue-200">Bénéficie d'une base unifiée dès le 1er tour et de bons reports de la droite.</p>
                        <div class="text-2xl font-extrabold text-blue-500 mt-2">~13 774 voix</div>
                    </div>
                    <div class="bg-cyan-900/50 border-l-4 border-cyan-500 p-4">
                        <h4 class="font-bold text-cyan-300">Sortant (Bedier)</h4>
                        <p class="text-sm text-cyan-200">Pénalisé par la dispersion des voix de gauche au 1er tour et un report partiel.</p>
                        <div class="text-2xl font-extrabold text-cyan-500 mt-2">~13 000 voix</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- PROJECTION 2026 - PREMIER TOUR -->
        <section id="projection2026_premier_tour" class="bg-gray-700 rounded-xl shadow-lg p-6 md:p-8 border-4 border-cyan-500">
            <h2 class="text-2xl md:text-3xl font-bold text-cyan-400 mb-4 border-b-4 border-cyan-500 inline-block pb-1">Projection 1er Tour 2026 (Fragmentation)</h2>
            <p class="text-lg text-gray-200 leading-relaxed mb-6">
                Analyse de la quadrangulaire probable qui définit les réserves de voix pour le second tour.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div class="order-2 md:order-1">
                    <h3 class="text-xl font-bold text-gray-100 mb-4">Répartition des Forces</h3>
                    <div class="chart-container">
                        <canvas id="projection1stTourChart"></canvas>
                    </div>
                </div>
                <div class="order-1 md:order-2 space-y-4">
                    <div class="bg-blue-900/50 border-l-4 border-blue-500 p-4">
                        <h4 class="font-bold text-blue-300">JMV Consolidé : 38%</h4>
                        <p class="text-sm text-blue-200">Le bloc central d'opposition est le plus haut.</p>
                    </div>
                    <div class="bg-cyan-900/50 border-l-4 border-cyan-500 p-4">
                        <h4 class="font-bold text-cyan-300">Joé Bedier : 27%</h4>
                        <p class="text-sm text-cyan-200">Le sortant résiste mais ne domine pas.</p>
                    </div>
                    <div class="bg-pink-900/50 border-l-4 border-pink-500 p-4">
                        <h4 class="font-bold text-pink-300">Éric Fruteau : 18%</h4>
                        <p class="text-sm text-pink-200">L'arbitre du scrutin.</p>
                    </div>
                    <div class="bg-red-900/50 border-l-4 border-red-500 p-4">
                        <h4 class="font-bold text-red-300">L. Virapoullé (RN) : 12%</h4>
                        <p class="text-sm text-red-200">Le trouble-fête à droite.</p>
                    </div>
                </div>
            </div>
        </section>

        <footer class="text-center py-12 space-y-4">
            <h3 class="text-2xl font-bold text-gray-200">Conclusion</h3>
            <p class="max-w-2xl mx-auto text-gray-400">
                L'élection de 2026 s'annonce comme le miroir inversé de 2020. Là où l'union avait fait la force de Bedier, la désunion à gauche risque de favoriser le retour de l'opposition consolidée.
            </p>
            <div class="text-xs text-gray-500 mt-8">
                Généré par Canvas Infographics
            </div>
        </footer>

    </main>

    <script>
        // Configuration Globale
        const FONT_COLOR = '#e0e0e0';
        const GRID_COLOR = 'rgba(224, 224, 224, 0.1)';

        function wrapLabel(label) {
            if (label.length <= 16) return label;
            const words = label.split(' ');
            const lines = [];
            let currentLine = words[0];
            for (let i = 1; i < words.length; i++) {
                if ((currentLine + " " + words[i]).length <= 16) {
                    currentLine += " " + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        const tooltipConfig = {
            callbacks: {
                title: function(tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                        return label.join(' ');
                    } else {
                        return label;
                    }
                }
            }
        };

        const commonChartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { 
                tooltip: tooltipConfig,
                legend: { labels: { color: FONT_COLOR } }
            },
            backgroundColor: 'transparent' 
        };

        // 1. Demographics Chart
        const ctxDemo = document.getElementById('demographicsChart').getContext('2d');
        new Chart(ctxDemo, {
            type: 'bar',
            data: {
                labels: ['2014 (2nd Tour)', '2020 (2nd Tour)'],
                datasets: [
                    { label: 'Inscrits (Vivier)', data: [34727, 42680], backgroundColor: '#3b82f6', order: 2, yAxisID: 'y' },
                    { label: 'Taux d\'Abstention (%)', data: [26.92, 51.94], borderColor: '#f472b6', backgroundColor: '#f472b6', type: 'line', borderWidth: 3, pointRadius: 6, order: 1, yAxisID: 'y1' }
                ]
            },
            options: {
                ...commonChartOptions,
                scales: {
                    x: { ticks: { color: FONT_COLOR }, grid: { color: GRID_COLOR } },
                    y: { type: 'linear', display: true, position: 'left', title: { display: true, text: 'Nombre d\'Inscrits', color: FONT_COLOR }, ticks: { color: FONT_COLOR }, grid: { color: GRID_COLOR } },
                    y1: { type: 'linear', display: true, position: 'right', title: { display: true, text: 'Abstention (%)', color: FONT_COLOR }, ticks: { color: FONT_COLOR }, grid: { drawOnChartArea: false, color: GRID_COLOR } }
                }
            }
        });

        // 2. Mobilization Chart (2020)
        const ctxMob = document.getElementById('mobilizationChart').getContext('2d');
        new Chart(ctxMob, {
            type: 'bar',
            indexAxis: 'y',
            data: {
                labels: ['Camp Virapoullé', 'Camp Bedier'],
                datasets: [{ label: 'Taux de Mobilisation Idéal (%)', data: [83.2, 61.2], backgroundColor: ['#3b82f6', '#06b6d4'], borderRadius: 5 }]
            },
            options: {
                ...commonChartOptions,
                plugins: { legend: { display: false }, tooltip: tooltipConfig },
                scales: { y: { ticks: { color: FONT_COLOR }, grid: { color: GRID_COLOR } }, x: { max: 100, title: { display: true, text: 'Pourcentage du Potentiel Mobilisé', color: FONT_COLOR }, ticks: { color: FONT_COLOR }, grid: { color: GRID_COLOR } } }
            }
        });

        // 3. Pool Chart (2020)
        const ctxPool = document.getElementById('poolChart').getContext('2d');
        const poolLabels = ['E. Fruteau (LDVG)', 'J-F. Ramassamy (LDVC)', 'S. Moutoucomorapoulé (LDVC)', 'Autres Listes', 'Reports Comportementaux'].map(l => wrapLabel(l));
        new Chart(ctxPool, {
            type: 'doughnut',
            data: {
                labels: poolLabels,
                datasets: [{ data: [3107, 1058, 1000, 2769, 2276], backgroundColor: ['#f59e0b', '#34d399', '#f87171', '#94a3b8', '#5b21b6'], hoverOffset: 8 }]
            },
            options: { ...commonChartOptions, plugins: { tooltip: tooltipConfig, legend: { position: 'bottom', labels: { color: FONT_COLOR } } } }
        });

        // 4. Validation Chart (2020)
        const ctxVal = document.getElementById('validationChart').getContext('2d');
        const valLabels = ['J.M. Virapoullé', 'Joé Bedier'].map(l => wrapLabel(l));
        new Chart(ctxVal, {
            type: 'bar',
            data: {
                labels: valLabels,
                datasets: [
                    { label: 'Prédiction Modèle', data: [9809, 10702], backgroundColor: '#4b5563', borderRadius: 4 },
                    { label: 'Résultat Réel', data: [9813, 10703], backgroundColor: ['#3b82f6', '#06b6d4'], borderRadius: 4 }
                ]
            },
            options: {
                ...commonChartOptions,
                scales: { x: { ticks: { color: FONT_COLOR }, grid: { color: GRID_COLOR } }, y: { beginAtZero: false, min: 8000, title: { display: true, text: 'Nombre de Voix', color: FONT_COLOR }, ticks: { color: FONT_COLOR }, grid: { color: GRID_COLOR } } }
            }
        });

        // 5. Projection 2nd Tour 2026
        const ctxProj2nd = document.getElementById('projection2ndTourChart').getContext('2d');
        const proj2ndLabels = ['Bedier (2020)', 'Opp. (2020)', 'Bedier (2026 Proj.)', 'Opp. (2026 Proj.)'].map(l => wrapLabel(l));
        new Chart(ctxProj2nd, {
            type: 'bar',
            data: {
                labels: proj2ndLabels,
                datasets: [
                    { label: 'Voix Réelles 2020', data: [10703, 9813, 0, 0], backgroundColor: ['#06b6d4', '#3b82f6', 'transparent', 'transparent'], stack: 'stack0' },
                    { label: 'Projection 2026', data: [0, 0, 13000, 13774], backgroundColor: ['transparent', 'transparent', '#06b6d4cc', '#3b82f6cc'], stack: 'stack1' }
                ]
            },
            options: {
                ...commonChartOptions,
                scales: { x: { stacked: true, ticks: { color: FONT_COLOR }, grid: { color: GRID_COLOR } }, y: { beginAtZero: false, min: 9000, stacked: false, title: { display: true, text: 'Nombre de Voix (Projection)', color: FONT_COLOR }, ticks: { color: FONT_COLOR }, grid: { color: GRID_COLOR } } }
            }
        });

        // 6. Projection 1st Tour 2026
        const ctxProj1st = document.getElementById('projection1stTourChart').getContext('2d');
        const proj1stLabels = ['JMV Consolidé', 'Joé Bedier', 'Eric Fruteau', 'L. Virapoullé/RN'].map(l => wrapLabel(l));
        new Chart(ctxProj1st, {
            type: 'bar',
            data: {
                labels: proj1stLabels,
                datasets: [{ label: 'Voix (Projection 1er Tour 2026)', data: [9804, 6966, 4644, 3096], backgroundColor: ['#3b82f6', '#06b6d4', '#f59e0b', '#dc2626'], borderRadius: 4 }]
            },
            options: {
                ...commonChartOptions,
                scales: { x: { ticks: { color: FONT_COLOR }, grid: { color: GRID_COLOR } }, y: { beginAtZero: false, min: 2000, title: { display: true, text: 'Nombre de Voix (1er Tour)', color: FONT_COLOR }, ticks: { color: FONT_COLOR }, grid: { color: GRID_COLOR } } }
            }
        });
    </script>
</body>
</html>
